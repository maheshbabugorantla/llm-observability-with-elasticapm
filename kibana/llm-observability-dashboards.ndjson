{"attributes":{"fieldAttrs":"{}","fieldFormatMap":"{}","fields":"[]","name":"traces-apm*","runtimeFieldMap":"{\"span.duration.seconds\": {\"type\": \"double\", \"script\": {\"source\": \"if (doc.containsKey('span.duration.us') && doc['span.duration.us'].size() > 0) { emit(doc['span.duration.us'].value / 1000000.0); }\"}}}","sourceFilters":"[]","timeFieldName":"@timestamp","title":"traces-apm*","typeMeta":"{}"},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"traces-apm-data-view","references":[],"type":"index-pattern","typeMigrationVersion":"8.0.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzEsMV0="}
{"attributes":{"title":"Cost Distribution by Model","description":"Donut chart showing total cost split by LLM model","visualizationType":"lnsPie","state":{"visualization":{"shape":"donut","layers":[{"layerId":"layer-cost-dist","layerType":"data","primaryGroups":["breakdown-model"],"metrics":["metric-total-cost"],"numberDisplay":"percent","categoryDisplay":"default","legendDisplay":"default","nestedLegend":false}]},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-cost-dist":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-total-cost"},"orderDirection":"desc","otherBucket":true,"missingBucket":false},"customLabel":true},"metric-total-cost":{"label":"Total Cost","dataType":"number","operationType":"sum","sourceField":"numeric_labels.gen_ai_cost_total_usd","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":4}}},"customLabel":true}},"columnOrder":["breakdown-model","metric-total-cost"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-cost-distribution","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-cost-dist","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Cost per Call by Model","description":"Average cost per LLM call broken down by model","visualizationType":"lnsMetric","state":{"visualization":{"layerId":"layer-cost-per-call","layerType":"data","metricAccessor":"metric-avg-cost","breakdownByAccessor":"breakdown-model"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-cost-per-call":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-avg-cost"},"orderDirection":"desc","otherBucket":false,"missingBucket":false},"customLabel":true},"metric-avg-cost":{"label":"Avg Cost per Call","dataType":"number","operationType":"average","sourceField":"numeric_labels.gen_ai_cost_total_usd","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":4,"suffix":" USD"}}},"customLabel":true}},"columnOrder":["breakdown-model","metric-avg-cost"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-cost-per-call","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-cost-per-call","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Cost over Time","description":"Total LLM cost in USD over time, split by model","visualizationType":"lnsXY","state":{"visualization":{"legend":{"isVisible":true,"position":"right"},"valueLabels":"hide","fittingFunction":"None","axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"labelsOrientation":{"x":0,"yLeft":0,"yRight":0},"gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"preferredSeriesType":"line","layers":[{"layerId":"layer-cost-time","accessors":["metric-total-cost"],"position":"top","seriesType":"line","showGridlines":false,"layerType":"data","xAccessor":"date-histogram","splitAccessor":"breakdown-model"}],"yTitle":"Cost (USD)","xTitle":"Time"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-cost-time":{"columns":{"date-histogram":{"label":"Time","dataType":"date","operationType":"date_histogram","sourceField":"@timestamp","isBucketed":true,"scale":"interval","params":{"interval":"auto","includeEmptyRows":true},"customLabel":true},"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-total-cost"},"orderDirection":"desc","otherBucket":true,"missingBucket":false},"customLabel":true},"metric-total-cost":{"label":"Cost (USD)","dataType":"number","operationType":"sum","sourceField":"numeric_labels.gen_ai_cost_total_usd","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":4,"suffix":" USD"}}},"customLabel":true}},"columnOrder":["date-histogram","breakdown-model","metric-total-cost"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-cost-over-time","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-cost-time","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Token Usage by Model","description":"Total input and output tokens per LLM model (stacked horizontal bar)","visualizationType":"lnsXY","state":{"visualization":{"legend":{"isVisible":true,"position":"right"},"valueLabels":"hide","fittingFunction":"None","axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"labelsOrientation":{"x":0,"yLeft":0,"yRight":0},"gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"preferredSeriesType":"bar_horizontal_stacked","layers":[{"layerId":"layer-token-usage","accessors":["metric-input-tokens","metric-output-tokens"],"position":"top","seriesType":"bar_horizontal_stacked","showGridlines":false,"layerType":"data","xAccessor":"breakdown-model"}],"yTitle":"Model","xTitle":"Total Tokens"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-token-usage":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-input-tokens"},"orderDirection":"desc","otherBucket":true,"missingBucket":false},"customLabel":true},"metric-input-tokens":{"label":"Input Tokens","dataType":"number","operationType":"sum","sourceField":"numeric_labels.gen_ai_usage_input_tokens","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":0}}},"customLabel":true},"metric-output-tokens":{"label":"Output Tokens","dataType":"number","operationType":"sum","sourceField":"numeric_labels.gen_ai_usage_output_tokens","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":0}}},"customLabel":true}},"columnOrder":["breakdown-model","metric-input-tokens","metric-output-tokens"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-token-usage","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-token-usage","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Input vs Output Token Ratio","description":"Average input and output tokens per call by model","visualizationType":"lnsXY","state":{"visualization":{"legend":{"isVisible":true,"position":"right"},"valueLabels":"hide","fittingFunction":"None","axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"labelsOrientation":{"x":0,"yLeft":0,"yRight":0},"gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"preferredSeriesType":"bar","layers":[{"layerId":"layer-token-ratio","accessors":["metric-avg-input","metric-avg-output"],"position":"top","seriesType":"bar","showGridlines":false,"layerType":"data","xAccessor":"breakdown-model"}],"yTitle":"Avg Tokens per Call","xTitle":"Model"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-token-ratio":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-avg-input"},"orderDirection":"desc","otherBucket":true,"missingBucket":false},"customLabel":true},"metric-avg-input":{"label":"Avg Input Tokens","dataType":"number","operationType":"average","sourceField":"numeric_labels.gen_ai_usage_input_tokens","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":0}}},"customLabel":true},"metric-avg-output":{"label":"Avg Output Tokens","dataType":"number","operationType":"average","sourceField":"numeric_labels.gen_ai_usage_output_tokens","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":0}}},"customLabel":true}},"columnOrder":["breakdown-model","metric-avg-input","metric-avg-output"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-token-ratio","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-token-ratio","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Total Tokens by Model","description":"Total tokens (input + output) per model \u2014 compare with Cost Distribution to gauge efficiency","visualizationType":"lnsXY","state":{"visualization":{"legend":{"isVisible":true,"position":"right"},"valueLabels":"hide","fittingFunction":"None","axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"labelsOrientation":{"x":0,"yLeft":0,"yRight":0},"gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"preferredSeriesType":"bar_horizontal","layers":[{"layerId":"layer-total-tokens","accessors":["metric-input-tokens","metric-output-tokens"],"position":"top","seriesType":"bar_horizontal","showGridlines":false,"layerType":"data","xAccessor":"breakdown-model"}],"yTitle":"Model","xTitle":"Total Tokens"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-total-tokens":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-input-tokens"},"orderDirection":"desc","otherBucket":false,"missingBucket":false},"customLabel":true},"metric-input-tokens":{"label":"Input Tokens","dataType":"number","operationType":"sum","sourceField":"numeric_labels.gen_ai_usage_input_tokens","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":0}}},"customLabel":true},"metric-output-tokens":{"label":"Output Tokens","dataType":"number","operationType":"sum","sourceField":"numeric_labels.gen_ai_usage_output_tokens","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":0}}},"customLabel":true}},"columnOrder":["breakdown-model","metric-input-tokens","metric-output-tokens"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-tokens-per-dollar","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-total-tokens","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Response Latency by Model","description":"Average and P95 response latency per LLM model in seconds","visualizationType":"lnsXY","state":{"visualization":{"legend":{"isVisible":true,"position":"right"},"valueLabels":"hide","fittingFunction":"None","axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"labelsOrientation":{"x":0,"yLeft":0,"yRight":0},"gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"preferredSeriesType":"bar","layers":[{"layerId":"layer-latency","accessors":["metric-avg-latency","metric-p95-latency"],"position":"top","seriesType":"bar","showGridlines":false,"layerType":"data","xAccessor":"breakdown-model"}],"yTitle":"Latency (seconds)","xTitle":"Model"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-latency":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-avg-latency"},"orderDirection":"desc","otherBucket":false,"missingBucket":false},"customLabel":true},"metric-avg-latency":{"label":"Avg Latency (s)","dataType":"number","operationType":"average","sourceField":"span.duration.seconds","isBucketed":false,"scale":"ratio","params":{"format":{"id":"number","params":{"decimals":1,"suffix":" s"}}},"customLabel":true},"metric-p95-latency":{"label":"P95 Latency (s)","dataType":"number","operationType":"percentile","sourceField":"span.duration.seconds","isBucketed":false,"scale":"ratio","params":{"percentile":95,"format":{"id":"number","params":{"decimals":1,"suffix":" s"}}},"customLabel":true}},"columnOrder":["breakdown-model","metric-avg-latency","metric-p95-latency"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-latency","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-latency","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"Error Rates by Model","description":"Success vs failure outcomes per LLM model","visualizationType":"lnsXY","state":{"visualization":{"legend":{"isVisible":true,"position":"right"},"valueLabels":"hide","fittingFunction":"None","axisTitlesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"tickLabelsVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"labelsOrientation":{"x":0,"yLeft":0,"yRight":0},"gridlinesVisibilitySettings":{"x":true,"yLeft":true,"yRight":true},"preferredSeriesType":"bar_stacked","layers":[{"layerId":"layer-errors","accessors":["metric-count"],"position":"top","seriesType":"bar_stacked","showGridlines":false,"layerType":"data","xAccessor":"breakdown-model","splitAccessor":"breakdown-outcome"}],"yTitle":"Number of Calls","xTitle":"Model"},"query":{"query":"","language":"kuery"},"filters":[],"datasourceStates":{"formBased":{"layers":{"layer-errors":{"columns":{"breakdown-model":{"label":"Model","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"labels.gen_ai_request_model","isBucketed":true,"params":{"size":10,"orderBy":{"type":"column","columnId":"metric-count"},"orderDirection":"desc","otherBucket":true,"missingBucket":false},"customLabel":true},"breakdown-outcome":{"label":"Outcome","dataType":"string","operationType":"terms","scale":"ordinal","sourceField":"event.outcome","isBucketed":true,"params":{"size":3,"orderBy":{"type":"alphabetical"},"orderDirection":"asc","otherBucket":false,"missingBucket":false},"customLabel":true},"metric-count":{"label":"Calls","dataType":"number","operationType":"count","isBucketed":false,"scale":"ratio","sourceField":"___records___","customLabel":true}},"columnOrder":["breakdown-model","breakdown-outcome","metric-count"],"incompleteColumns":{}}}}},"internalReferences":[],"adHocDataViews":{}}},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-viz-errors","references":[{"id":"traces-apm-data-view","name":"indexpattern-datasource-layer-layer-errors","type":"index-pattern"}],"type":"lens","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzIsMV0="}
{"attributes":{"title":"LLM Observability \u2014 Live Metrics","description":"Real-time LLM observability dashboard showing cost analysis, token usage, latency, and error rates across models and providers.","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\": {\"query\": \"\", \"language\": \"kuery\"}, \"filter\": []}"},"optionsJSON":"{\"useMargins\": true, \"syncColors\": false, \"syncCursor\": true, \"syncTooltips\": false, \"hidePanelTitles\": false}","panelsJSON":"[{\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 0, \"y\": 0, \"w\": 16, \"h\": 15, \"i\": \"panel-1\"}, \"panelIndex\": \"panel-1\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-1\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 16, \"y\": 0, \"w\": 16, \"h\": 15, \"i\": \"panel-2\"}, \"panelIndex\": \"panel-2\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-2\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 32, \"y\": 0, \"w\": 16, \"h\": 15, \"i\": \"panel-3\"}, \"panelIndex\": \"panel-3\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-3\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 0, \"y\": 15, \"w\": 16, \"h\": 15, \"i\": \"panel-4\"}, \"panelIndex\": \"panel-4\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-4\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 16, \"y\": 15, \"w\": 16, \"h\": 15, \"i\": \"panel-5\"}, \"panelIndex\": \"panel-5\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-5\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 32, \"y\": 15, \"w\": 16, \"h\": 15, \"i\": \"panel-6\"}, \"panelIndex\": \"panel-6\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-6\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 0, \"y\": 30, \"w\": 24, \"h\": 15, \"i\": \"panel-7\"}, \"panelIndex\": \"panel-7\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-7\"}, {\"version\": \"8.11.0\", \"type\": \"lens\", \"gridData\": {\"x\": 24, \"y\": 30, \"w\": 24, \"h\": 15, \"i\": \"panel-8\"}, \"panelIndex\": \"panel-8\", \"embeddableConfig\": {\"enhancements\": {}}, \"panelRefName\": \"panel_panel-8\"}]","refreshInterval":{"pause":true,"value":0},"timeFrom":"now-7d","timeRestore":true,"timeTo":"now","version":1},"coreMigrationVersion":"8.8.0","created_at":"2024-01-01T00:00:00.000Z","id":"llm-observability-dashboard","references":[{"id":"llm-viz-cost-distribution","name":"panel_panel-1","type":"lens"},{"id":"llm-viz-cost-per-call","name":"panel_panel-2","type":"lens"},{"id":"llm-viz-cost-over-time","name":"panel_panel-3","type":"lens"},{"id":"llm-viz-token-usage","name":"panel_panel-4","type":"lens"},{"id":"llm-viz-token-ratio","name":"panel_panel-5","type":"lens"},{"id":"llm-viz-tokens-per-dollar","name":"panel_panel-6","type":"lens"},{"id":"llm-viz-latency","name":"panel_panel-7","type":"lens"},{"id":"llm-viz-errors","name":"panel_panel-8","type":"lens"}],"type":"dashboard","typeMigrationVersion":"8.9.0","updated_at":"2024-01-01T00:00:00.000Z","version":"WzYsMV0="}
